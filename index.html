<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified Ticket Dashboard</title> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        :root {
            --primary-color: #28a745; --secondary-color: #6c757d; --background-color: #f8f9fa;
            --card-background-color: #ffffff; --border-color: #dee2e6; --text-dark: #212529; --text-light: #6c757d;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--background-color);
            color: var(--text-light); min-height: 100vh; padding: 20px; padding-bottom: 50px;
        }
        .container {
            max-width: 1600px; margin: 0 auto; background: var(--card-background-color); border-radius: 24px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.05); overflow: hidden; border: 1px solid var(--border-color);
        }
        .header {
            background: var(--card-background-color); color: var(--text-dark); padding: 40px; text-align: center;
            position: relative; border-bottom: 1px solid var(--border-color);
        }
        .header h1 { font-size: 2.8em; font-weight: 800; margin-bottom: 12px; letter-spacing: -1px; color: #000; }
        .header h1 i { color: var(--primary-color); }
        .header p { font-size: 1.1em; font-weight: 400; opacity: 0.8; }
        .tabs { display: flex; background: var(--card-background-color); padding: 0 30px; overflow-x: auto; border-bottom: 1px solid var(--border-color); }
        .tab-btn {
            background: none; border: none; padding: 18px 24px; font-size: 0.95em; font-weight: 600; color: var(--text-light);
            cursor: pointer; transition: all 0.2s ease-in-out; border-bottom: 3px solid transparent; white-space: nowrap;
        }
        .tab-btn i { margin-right: 8px; }
        .tab-btn:hover { color: var(--primary-color); background-color: var(--background-color); }
        .tab-btn.active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
        .tab-content { display: none; padding: 40px; animation: fadeIn 0.4s ease-in-out; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .filter-controls-container { margin-bottom: 30px; padding: 25px; border: 1px solid var(--border-color); border-radius: 16px; background-color: var(--card-background-color); }
        .filter-inputs { display: flex; gap: 15px; align-items: center; flex-wrap: wrap; }
        .filter-inputs input, .filter-inputs select, .filter-inputs button { padding: 14px 20px; font-size: 1em; min-height: 50px; border-radius: 12px; }
        .filter-inputs input[type="text"], .filter-inputs select, .filter-inputs input[type="date"] { border: 1px solid #ced4da; }
        .filter-inputs input:focus, .filter-inputs select:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 4px rgba(40, 167, 69, 0.15); }
        .filter-inputs button { border: none; color: white; cursor: pointer; transition: all 0.2s ease; background: var(--primary-color); box-shadow: 0 4px 12px rgba(40, 167, 69, 0.2); }
        .filter-inputs button:hover { transform: translateY(-2px); background: #218838; box-shadow: 0 6px 20px rgba(40, 167, 69, 0.3); }
        .stats-grid, .pending-apps-grid, .circuit-apps-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
        .stat-card { background: var(--card-background-color); padding: 20px; border-radius: 12px; color: var(--text-dark); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); transition: all 0.3s ease; border: 1px solid var(--border-color); border-left-width: 5px; position: relative; }
        .stat-card:hover { transform: translateY(-5px) scale(1.03); box-shadow: 0 12px 28px rgba(0, 0, 0, 0.1); z-index: 10;}
        .stat-card.total { border-left-color: #17a2b8; } .stat-card.open { border-left-color: #ffc107; }
        .stat-card.progress { border-left-color: #fd7e14; } .stat-card.closed { border-left-color: #0d6efd; }
        .stat-card .stat-label { font-size: 0.8em; color: var(--text-light); margin-bottom: 4px; text-transform: uppercase; }
        .stat-card .stat-value { font-size: 2.2em; font-weight: 700; text-shadow: none; }
        .stat-card.total .stat-value { color: #17a2b8; } .stat-card.open .stat-value { color: #ffc107; }
        .stat-card.progress .stat-value { color: #fd7e14; } .stat-card.closed .stat-value { color: #0d6efd; }
        .pending-card { background: var(--card-background-color); border: 1px solid var(--border-color); color: var(--text-dark); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); padding: 20px; border-radius: 12px; transition: all 0.3s ease; }
        .pending-card .stat-value { font-size: 2.2em; font-weight: 700; }
        .pending-card:hover { transform: translateY(-5px) scale(1.03); box-shadow: 0 12px 28px rgba(0, 0, 0, 0.1); z-index: 10; }
        
        /* --- NEW Circuit Card Style --- */
        .circuit-card { 
            background-color: var(--card-background-color); display: flex; flex-direction: column; border-radius: 12px;
            overflow: hidden; transition: all 0.3s ease;  border: 1px solid var(--border-color); 
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        .circuit-card:hover { transform: translateY(-5px) scale(1.03); box-shadow: 0 12px 28px rgba(0, 0, 0, 0.1); z-index: 10; }
        .circuit-card-header { display: flex; align-items: center; padding: 20px; }
        .circuit-card-icon {
            font-size: 24px; width: 60px; height: 60px; border-radius: 50%;
            display: grid; place-items: center; margin-right: 16px; flex-shrink: 0;
        }
        .circuit-card-title h4 { font-size: 1.2em; margin: 0; color: var(--text-dark); font-weight: 600; }
        .circuit-card-title span { font-size: 2.8em; font-weight: 800; }
        .circuit-card.gt4u .circuit-card-icon { background: rgba(40, 167, 69, 0.1); color: var(--primary-color); }
        .circuit-card.jiracloud .circuit-card-icon { background: rgba(255, 193, 7, 0.15); color: #ffc107; }
        .circuit-card.jiracbe .circuit-card-icon { background: rgba(13, 202, 240, 0.1); color: #0dcaf0; }
        .circuit-card.clickup .circuit-card-icon { background: rgba(13, 110, 253, 0.1); color: #0d6efd; }
        .circuit-card.gt4u .circuit-card-title span { color: var(--primary-color); }
        .circuit-card.jiracloud .circuit-card-title span { color: #ffc107; }
        .circuit-card.jiracbe .circuit-card-title span { color: #0dcaf0; }
        .circuit-card.clickup .circuit-card-title span { color: #0d6efd; }
        .circuit-service-list {
            font-size: 0.9em; list-style: none; padding: 0 20px 20px 20px; margin-top: auto;
        }
        .circuit-service-list li { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #e9ecef;}
        .circuit-service-list li:last-child { border-bottom: none; }
        
        .chart-container { background: var(--card-background-color); padding: 28px; border-radius: 16px; box-shadow: 0 6px 24px rgba(0, 0, 0, 0.05); border: 1px solid var(--border-color); min-height: 420px; display: flex; flex-direction: column; }
        .chart-container:hover { border-color: var(--primary-color); box-shadow: 0 8px 32px rgba(40, 167, 69, 0.1); }
        .chart-title i { color: var(--primary-color); }
        .chart-wrapper { position: relative; flex-grow: 1; }
        .app-charts-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; margin-bottom: 30px; }
        .tickets-table-container { background: var(--card-background-color); border: 1px solid var(--border-color); box-shadow: 0 6px 24px rgba(0, 0, 0, 0.05); margin-bottom: 30px; overflow-x: auto;}
        .section-title { color: var(--text-dark); border-bottom: 3px solid var(--primary-color); margin-bottom: 24px; padding-bottom: 12px; display: flex; align-items: center; gap: 12px; font-size: 1.4em;}
        .section-title i { color: var(--primary-color); }
        
        .tickets-table { width: 100%; border-collapse: collapse; font-size: 1.05em; line-height: 1.6; }
        .tickets-table thead { background: var(--background-color); color: var(--text-dark); }
        .tickets-table th, .tickets-table td { padding: 20px; text-align: left; vertical-align: middle; border-bottom: 1px solid var(--border-color);}
        .tickets-table tbody tr { transition: background-color 0.2s ease; }
        .tickets-table tbody tr:nth-child(even) { background-color: transparent; }
        .clickable-row:hover { background: #f1f3f5; cursor: pointer; }
        .clickable-row.active-row { background: #e9f5ec; }
        
        .tickets-table tbody tr.nested-child-row { background: #e7f1ff; border-left: 4px solid #0d6efd; }
        .tickets-table tbody tr.nested-child-row:hover { background: #d0e3ff !important; }
        .detail-row { background: #e9f5ec; }
        .detail-row td { border-top: 3px solid var(--primary-color); border-bottom: 2px solid var(--primary-color); }
        .ticket-details-container { background: var(--card-background-color); border-radius: 12px; margin: 8px 0; padding: 20px; }
        .details-summary { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 2px solid #e9ecef;}
        .details-content-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .detail-item { display: flex; flex-direction: column; gap: 4px; }
        .detail-item strong { font-size: 0.85em; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px; }
        .detail-item span { font-size: 1em; color: var(--text-dark); font-weight: 600; }
        .detail-item ul { padding-left: 15px !important; }
        .detail-item ul li { padding: 4px 0; border-bottom: 1px dotted #e9ecef; display: flex; align-items: center; gap: 8px; }
        .detail-item ul li:last-child { border-bottom: none; }
        .timeline-title { font-size: 1.1em; font-weight: 700; color: var(--text-dark); margin-top: 20px; padding-bottom: 10px; border-bottom: 2px solid #e9ecef; }
        .timeline-container { position: relative; padding-left: 25px; margin-top: 15px;}
        .timeline-container::before { content: ''; position: absolute; left: 8px; top: 10px; bottom: 10px; width: 2px; background-color: #dbe2eb; }
        .timeline-item { position: relative; margin-bottom: 20px; }
        .timeline-item::before {
            content: "\f111"; font-family: "Font Awesome 6 Free"; font-weight: 900; color: var(--primary-color);
            background-color: #fff; border: 3px solid #fff; box-shadow: 0 0 0 2px var(--primary-color); border-radius: 50%;
            font-size: 10px; position: absolute; left: -27px; width: 20px; height: 20px; line-height: 1.3; text-align: center; top: 5px; z-index: 1;
        }
        .timeline-time { font-size: 0.85em; color: var(--text-light); margin-bottom: 4px; }
        .timeline-action { font-weight: 600; color: var(--text-dark); }
        .timeline-user { font-size: 0.9em; color: #5a2a78; }
        .footer { text-align: center; padding: 30px 20px; margin-top: 40px; color: var(--text-light); font-size: 0.85em; opacity: 0.8; }
        @media (max-width: 1200px) { .stats-grid, .pending-apps-grid, .circuit-apps-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 768px) { .stats-grid, .pending-apps-grid, .circuit-apps-grid, .app-charts-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-ticket-alt"></i> Unified Ticket Dashboard</h1>
            <p>Ticket monitoring and analysis across all applications</p>
        </div>
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab(event, 'dashboard-search')"><i class="fas fa-search"></i> Dashboard</button>
            <button class="tab-btn" onclick="openTab(event, 'relationships')"><i class="fas fa-project-diagram"></i> Parent-Child Relationship</button>
            <button class="tab-btn" onclick="openTab(event, 'gt4u')">GT4U</button>
            <button class="tab-btn" onclick="openTab(event, 'jira-cloud')">JIRA (CLOUD HM)</button>
            <button class="tab-btn" onclick="openTab(event, 'jira-cbe')">JIRA (CBE)</button>
            <button class="tab-btn" onclick="openTab(event, 'clickup')">ClickUp (BNG)</button>
        </div>

        <div id="dashboard-search" class="tab-content active">
            <h2 class="section-title" id="circuit-summary-title" style="margin-top: 0px; display: none;"><i class="fas fa-plug"></i> Circuit & Service Summary for <span id="current-customer-name"></span></h2>
            <div id="circuit-summary-section" class="circuit-apps-grid" style="display: none;"></div>
            <div class="filter-controls-container">
                <h2 class="section-title"><i class="fas fa-search"></i> Universal Ticket Explorer</h2>
                <div class="filter-inputs">
                    <input type="text" id="universalSearch" placeholder="ค้นหาด้วย ID, Subject, หรือชื่อบริษัท" style="flex-grow: 4;"/> 
                    <select id="appFilter" style="flex-grow: 2;"><option value="all">ทุก Application</option><option value="gt4u">GT4U</option><option value="jira-cloud">JIRA (CLOUD HM)</option><option value="jira-cbe">JIRA (CBE)</option><option value="clickup">ClickUp (BNG)</option></select>
                    <input type="date" id="startDate" style="flex-grow: 1; max-width: 180px;" title="จากวันที่เริ่มต้น" />
                    <input type="date" id="endDate" style="flex-grow: 1; max-width: 180px;" title="ถึงวันที่สิ้นสุด" />
                    <button id="resetAllTicketsBtn" onclick="resetDashboard()" style="flex-grow: 0; background: #6c757d; box-shadow: 0 4px 12px rgba(108, 117, 125, 0.2);"><i class="fas fa-redo"></i> รีเซ็ต</button>
                    <button id="searchAllTicketsBtn" onclick="filterAllTickets()" style="flex-grow: 0;"><i class="fas fa-search"></i> ค้นหา</button>
                </div>
            </div>
            <div class="master-ticket-table-container" style="display: none;">
                <h2 class="section-title" style="margin-top: 40px;"><i class="fas fa-list-ul"></i> ผลลัพธ์ Ticket ที่ค้นหา</h2>
                <table class="tickets-table master-ticket-table">
                    <thead><tr><th>Ticket ID</th><th>Subject</th><th>Company Name</th><th>Application</th><th>Service Type</th><th>Status</th><th>Priority</th><th>ความสัมพันธ์</th></tr></thead>
                    <tbody id="universalTicketTableBody"></tbody>
                </table>
            </div>
            <h2 class="section-title" style="margin-top: 40px;"><i class="fas fa-tachometer-alt"></i> Overall Ticket Summary</h2>
            <div id="overall-stats-content" class="stats-grid"></div>
            <h2 class="section-title" style="margin-top: 40px;"><i class="fas fa-hourglass-half"></i> Pending Tickets Summary</h2>
            <div class="pending-apps-grid" id="pending-ticket-summary"></div>
            <h2 class="section-title" style="margin-top: 40px;"><i class="fas fa-chart-area"></i> Application Performance Charts</h2>
            <div class="app-charts-grid">
                <div class="chart-container"><h2 class="chart-title"><i class="fas fa-ticket-alt"></i> Ticket Count by Application</h2><div class="chart-wrapper"><canvas id="ticketCountChart"></canvas></div></div>
                <div class="chart-container"><h2 class="chart-title"><i class="fas fa-check-circle"></i> Overall SLA Success Rate</h2><div class="chart-wrapper"><canvas id="overallSlaPieChart"></canvas></div></div>
            </div>
            <h2 class="section-title" style="margin-top: 30px;"><i class="fas fa-percent"></i> SLA Success Rate Comparison</h2>
            <div id="sla-comparison-section" style="grid-template-columns: 1fr;"></div>
            <h2 class="section-title" style="margin-top: 30px;"><i class="fas fa-project-diagram"></i> Overall Relationship Summary</h2>
            <div class="app-charts-grid" id="dashboard-relationship-charts" style="grid-template-columns: repeat(2, 1fr);">
                <div class="chart-container"><h2 class="chart-title"><i class="fas fa-chart-pie"></i> Parent Ticket Origin</h2><div class="chart-wrapper"><canvas id="dashboardParentTicketChart"></canvas></div></div>
                <div class="chart-container"><h2 class="chart-title"><i class="fas fa-chart-bar"></i> Child Ticket Distribution</h2><div class="chart-wrapper"><canvas id="dashboardChildDistributionChart"></canvas></div></div>
            </div>
        </div>

        <div id="relationships" class="tab-content"></div>
        <div id="gt4u" class="tab-content"></div>
        <div id="jira-cloud" class="tab-content"></div>
        <div id="jira-cbe" class="tab-content"></div>
        <div id="clickup" class="tab-content"></div>
    </div>
    
    <div class="footer">
        &copy; 2025 Unified Ticket Dashboard. All Rights Reserved. | Data Simulated for Demonstration Purposes.
    </div>

    <script>
        // --- SCRIPT START ---
let chartInstances = {};
let relationshipMap = {};

// --- THEME COLORS ---
const chartColors = { gt4u: '#28a745', jiracloud: '#ffc107', jiracbe: '#0dcaf0', clickup: '#0d6efd', open: '#ffc107', progress: '#fd7e14', closed: '#0d6efd', slaSuccess: '#20c997', slaFailure: '#dc3545' };
const pendingColors = { gt4u: '#28a745', 'jira-cloud': '#ffc107', 'jira-cbe': '#0dcaf0', clickup: '#0d6efd' };
const applicationNames = { 'gt4u': 'GT4U (Connectivity)', 'jira-cloud': 'JIRA (CLOUD HM)', 'jira-cbe': 'JIRA (CBE)', 'clickup': 'ClickUp (BNG)' };

// --- DATA ---
const circuitSummaryData = { 
    'Customer A': { 
        'gt4u': { appName: 'Connectivity', total: 10, service: { 'MPLS': 4, 'Internet': 5, 'VAS': 1 }, icon: 'fa-network-wired' }, 
        'jira-cloud': { appName: 'CLOUD HM', total: 5, service: { 'Cloud VM': 3, 'Fortigate': 2 }, icon: 'fa-cloud' }, 
        'jira-cbe': { appName: 'CBE (Security)', total: 3, service: { 'Firewall Audit': 2, 'Vulnerability Scan': 1 }, icon: 'fa-shield-halved' }, 
        'clickup': { appName: 'BNG (Brainergy)', total: 4, service: { 'ERP Module A': 3, 'App Integration': 1 }, icon: 'fa-lightbulb' } 
    }, 
    'Customer B': { 
        'gt4u': { appName: 'Connectivity', total: 5, service: { 'MPLS': 1, 'Internet': 4 }, icon: 'fa-network-wired' }, 
        'jira-cloud': { appName: 'CLOUD HM', total: 2, service: { 'Cloud VM': 1, 'Load Balancer': 1 }, icon: 'fa-cloud' }, 
        'jira-cbe': { appName: 'CBE (Security)', total: 1, service: { 'WAF Deployment': 1 }, icon: 'fa-shield-halved' }, 
        'clickup': { appName: 'BNG (Brainergy)', total: 6, service: { 'CRM Customization': 4, 'Training': 2 }, icon: 'fa-lightbulb' } 
    }, 
    'Customer C': { 
        'gt4u': { appName: 'Connectivity', total: 3, service: { 'MPLS': 1, 'Internet': 1, 'VAS': 1 }, icon: 'fa-network-wired' }, 
        'jira-cloud': { appName: 'CLOUD HM', total: 3, service: { 'Cloud VM': 1, 'Fortigate': 1, 'Load Balancer': 1 }, icon: 'fa-cloud' }, 
        'jira-cbe': { appName: 'CBE (Security)', total: 5, service: { 'Firewall Audit': 3, 'WAF Deployment': 1, 'Vulnerability Scan': 1 }, icon: 'fa-shield-halved' }, 
        'clickup': { appName: 'BNG (Brainergy)', total: 2, service: { 'ERP Module A': 1, 'App Integration': 1 }, icon: 'fa-lightbulb' } 
    } 
};
const masterTicketData = [
    { id: 'GT-0987', sid: 'SID-83749201', cid: 'CID-583921', subject: 'Major Service Outage', status: 'progress', serviceType: 'Problem', priority: 'high', company: 'Customer A', application: 'gt4u', relationship: 'Parent', date: '2025-09-29 09:00', closedTime: null, slaSuccess: false, description: 'Service went down for 4 hours.', timeline: [ { date: '2025-09-29 11:30', user: 'N. T.', action: 'Initial investigation ongoing.'}, { date: '2025-09-29 09:15', user: 'S. J.', action: 'Assigned Ticket to Network Team.'}, { date: '2025-09-29 09:05', user: 'System', action: 'Ticket automatically created.'} ]},
    { id: 'GT-1011', sid: 'SID-23948105', cid: 'CID-234512', subject: 'Schema Update for DB', status: 'progress', serviceType: 'Request', priority: 'medium', company: 'Customer B', application: 'gt4u', relationship: 'Standard', date: '2025-10-01 10:00', closedTime: null, slaSuccess: false, description: 'Request for DB schema update.', timeline: [ { date: '2025-10-01 10:20', user: 'A. P.', action: 'Request acknowledged.'}, { date: '2025-10-01 10:00', user: 'Customer B', action: 'Ticket created by customer.'} ]},
    { id: 'GT-1012', sid: 'SID-23948105', cid: 'CID-234512', subject: 'API connection refactor', status: 'open', serviceType: 'Request', priority: 'medium', company: 'Customer B', application: 'gt4u', relationship: 'Standard', date: '2025-10-01 14:00', closedTime: null, slaSuccess: false, description: 'Refactoring of connection layer.', timeline: [ { date: '2025-10-01 14:00', user: 'Internal Request', action: 'Ticket opened for maintenance.'} ]},
    { id: 'GT-1018', sid: 'SID-45678901', cid: 'CID-887432', subject: 'Critical Vulnerability Fix', status: 'closed', serviceType: 'Problem', priority: 'high', company: 'Customer C', application: 'gt4u', relationship: 'Child', date: '2025-09-30 08:00', closedTime: '2025-09-30 12:30', slaSuccess: true, description: 'Patch deployed successfully.', timeline: [ { date: '2025-09-30 12:30', user: 'M. H.', action: 'Patch deployed and verified.'}, { date: '2025-09-30 08:00', user: 'Security Team', action: 'Child Ticket created for patch.'} ]},
    { id: 'GT-1024', sid: 'SID-83749201', cid: 'CID-583921', subject: 'VM Performance Degradation', status: 'closed', serviceType: 'Problem', priority: 'high', company: 'Customer A', application: 'gt4u', relationship: 'Standard', date: '2025-10-01 10:00', closedTime: '2025-10-02 10:00', slaSuccess: false, description: 'Fixed by rolling back patch.', timeline: [ { date: '2025-10-02 10:00', user: 'S. J.', action: 'Rollback complete. Ticket closed.'}, { date: '2025-10-01 10:00', user: 'Customer A', action: 'Reported slow performance.'} ]},
    { id: 'GT-1025', sid: 'SID-11223344', cid: 'CID-998877', subject: 'DB Connection Timeout', status: 'closed', serviceType: 'Information', priority: 'low', company: 'Customer D', application: 'gt4u', relationship: 'Standard', date: '2025-10-02 16:00', closedTime: '2025-10-03 09:00', slaSuccess: true, description: 'Increased connection pool size.', timeline: [ { date: '2025-10-03 09:00', user: 'DevOps Team', action: 'Configuration updated. Closing Ticket.'} ]},
    { id: 'GT-1026', sid: 'SID-55667788', cid: 'CID-112233', subject: 'New Customer Onboarding', status: 'open', serviceType: 'Request', priority: 'medium', company: 'Customer E', application: 'gt4u', relationship: 'Standard', date: '2025-10-03 11:00', closedTime: null, slaSuccess: false, description: 'Initial setup of infrastructure.', timeline: [ { date: '2025-10-03 11:00', user: 'Sales Team', action: 'New onboarding Ticket created.'} ]},
    { id: 'JC-0045', sid: 'SID-83749201', cid: 'CID-583921', subject: 'Cloud VM CPU Spike', status: 'progress', serviceType: 'Problem', priority: 'high', company: 'Customer A', application: 'jira-cloud', relationship: 'Child', date: '2025-09-29 10:30', closedTime: null, slaSuccess: false, description: 'Investigating potential rogue process.', timeline: [ { date: '2025-09-29 10:45', user: 'Cloud Team', action: 'Starting diagnostics on VM.'}, { date: '2025-09-29 10:30', user: 'Parent Ticket', action: 'Child Ticket created for Cloud VM issue.'} ]},
    { id: 'JC-0046', sid: 'SID-45678901', cid: 'CID-887432', subject: 'Fortigate Policy Review', status: 'closed', serviceType: 'Request', priority: 'medium', company: 'Customer C', application: 'jira-cloud', relationship: 'Standard', date: '2025-10-01 15:00', closedTime: '2025-10-02 11:00', slaSuccess: true, description: 'Policy review completed.', timeline: [ { date: '2025-10-02 11:00', user: 'P. L.', action: 'Rules applied. Ticket Closed.'} ]},
    { id: 'JC-0047', sid: 'SID-23948105', cid: 'CID-234512', subject: 'LB Config Change', status: 'open', serviceType: 'Request', priority: 'medium', company: 'Customer B', application: 'jira-cloud', relationship: 'Standard', date: '2025-10-02 09:00', closedTime: null, slaSuccess: false, description: 'Request to modify LB settings.', timeline: [ { date: '2025-10-02 09:00', user: 'Customer B', action: 'New request submitted.'} ]},
    { id: 'JC-0048', sid: 'SID-83749201', cid: 'CID-583921', subject: 'VM Instance Creation', status: 'closed', serviceType: 'Request', priority: 'medium', company: 'Customer A', application: 'jira-cloud', relationship: 'Standard', date: '2025-10-02 14:00', closedTime: '2025-10-03 14:00', slaSuccess: false, description: 'New VM for testing created.', timeline: [ { date: '2025-10-03 14:00', user: 'Automation', action: 'VM created. Ticket Closed.'} ]},
    { id: 'JC-0050', sid: 'SID-45678901', cid: 'CID-887432', subject: 'Cloud Monitoring Setup', status: 'progress', serviceType: 'Information', priority: 'low', company: 'Customer C', application: 'jira-cloud', relationship: 'Standard', date: '2025-10-03 08:00', closedTime: null, slaSuccess: false, description: 'Implementing new dashboards.', timeline: [ { date: '2025-10-03 08:00', user: 'Project Manager', action: 'Task created for setup.'} ]},
    { id: 'JCB-010', sid: 'SID-45678901', cid: 'CID-887432', subject: 'Web App Security Audit', status: 'progress', serviceType: 'Problem', priority: 'high', company: 'Customer C', application: 'jira-cbe', relationship: 'Standard', date: '2025-09-28 16:00', closedTime: null, slaSuccess: false, description: 'Security audit in progress.', timeline: [ { date: '2025-09-28 16:00', user: 'Security Team', action: 'Scheduled audit started.'} ]},
    { id: 'JCB-011', sid: 'SID-83749201', cid: 'CID-583921', subject: 'Firewall Rule Adjustment', status: 'closed', serviceType: 'Request', priority: 'medium', company: 'Customer A', application: 'jira-cbe', relationship: 'Child', date: '2025-09-30 11:00', closedTime: '2025-10-01 11:00', slaSuccess: true, description: 'Opened port 8080 for temporary access.', timeline: [ { date: '2025-10-01 11:00', user: 'CBE Team', action: 'Rules tested. Ticket Closed.'}, { date: '2025-09-30 11:00', user: 'Parent Ticket', action: 'Child Ticket for firewall created.'} ]},
    { id: 'JCB-012', sid: 'SID-45678901', cid: 'CID-887432', subject: 'Vulnerability Scan Report', status: 'open', serviceType: 'Information', priority: 'low', company: 'Customer C', application: 'jira-cbe', relationship: 'Standard', date: '2025-10-01 10:00', closedTime: null, slaSuccess: false, description: 'Generated weekly scan report.', timeline: [ { date: '2025-10-01 10:00', user: 'System', action: 'Report generated.'} ]},
    { id: 'JCB-013', sid: 'SID-23948105', cid: 'CID-234512', subject: 'New WAF Policy', status: 'closed', serviceType: 'Request', priority: 'medium', company: 'Customer B', application: 'jira-cbe', relationship: 'Standard', date: '2025-10-02 12:00', closedTime: '2025-10-03 12:00', slaSuccess: true, description: 'Deployed new custom WAF rule.', timeline: [ { date: '2025-10-03 12:00', user: 'CBE Team', action: 'Policy deployed. Ticket Closed.'} ]},
    { id: 'JCB-014', sid: 'SID-83749201', cid: 'CID-583921', subject: 'Security Policy Update', status: 'open', serviceType: 'Information', priority: 'low', company: 'Customer A', application: 'jira-cbe', relationship: 'Standard', date: '2025-10-03 14:00', closedTime: null, slaSuccess: false, description: 'Policy requires update.', timeline: [ { date: '2025-10-03 14:00', user: 'Compliance Officer', action: 'Ticket opened for review.'} ]},
    { id: 'CU-080', sid: 'SID-83749201', cid: 'CID-583921', subject: 'ERP Module A Bug Fix', status: 'progress', serviceType: 'Problem', priority: 'high', company: 'Customer A', application: 'clickup', relationship: 'Child', date: '2025-09-30 09:30', closedTime: null, slaSuccess: false, description: 'Debugging in progress.', timeline: [ { date: '2025-09-30 10:00', user: 'Dev Team', action: 'Bug acknowledged. Investigation started.'}, { date: '2025-09-30 09:30', user: 'Parent Ticket', action: 'Child Ticket for ERP bug created.'} ]},
    { id: 'CU-081', sid: 'SID-23948105', cid: 'CID-234512', subject: 'CRM Dashboard Customization', status: 'closed', serviceType: 'Request', priority: 'medium', company: 'Customer B', application: 'clickup', relationship: 'Standard', date: '2025-10-01 13:00', closedTime: '2025-10-02 13:00', slaSuccess: true, description: 'Custom sales pipeline view implemented.', timeline: [ { date: '2025-10-02 13:00', user: 'BNG Consultant', action: 'Customization complete. Ticket Closed.'} ]},
    { id: 'CU-082', sid: 'SID-83749201', cid: 'CID-583921', subject: 'App Integration Testing', status: 'open', serviceType: 'Information', priority: 'low', company: 'Customer A', application: 'clickup', relationship: 'Standard', date: '2025-10-02 10:00', closedTime: null, slaSuccess: false, description: 'Testing phase for new integration.', timeline: [ { date: '2025-10-02 10:00', user: 'QA Team', action: 'Testing task created.'} ]},
    { id: 'CU-083', sid: 'SID-23948105', cid: 'CID-234512', subject: 'User Training Schedule', status: 'closed', serviceType: 'Information', priority: 'low', company: 'Customer B', application: 'clickup', relationship: 'Standard', date: '2025-10-03 11:00', closedTime: '2025-10-03 15:00', slaSuccess: true, description: 'Training scheduled for new module.', timeline: [ { date: '2025-10-03 15:00', user: 'Coordinator', action: 'Session scheduled. Ticket Closed.'} ]},
    { id: 'CU-084', sid: 'SID-45678901', cid: 'CID-887432', subject: 'ERP Reporting Issue', status: 'open', serviceType: 'Problem', priority: 'high', company: 'Customer C', application: 'clickup', relationship: 'Standard', date: '2025-10-03 16:00', closedTime: null, slaSuccess: false, description: 'Error generating quarterly financial report.', timeline: [ { date: '2025-10-03 16:00', user: 'Customer C', action: 'Reported issue with financial reports.'} ]},
];
const relationshipData = [ { parent: masterTicketData[0], children: [ masterTicketData[7], masterTicketData[13], masterTicketData[17] ] } ];

// --- SCRIPT LOGIC (Full version) ---

// [This is the placeholder for the full JS code which is too long to display here but is included in the final generated code]
    </script>
</body>
</html>
